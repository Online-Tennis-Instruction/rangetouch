{"version":3,"sources":["docs/src/js/docs.js","src/js/config.js","src/js/utils/is.js","src/js/utils/numbers.js","src/js/rangetouch.js","src/js/utils/css.js","src/js/utils/events.js"],"names":["defaults","addCSS","thumbWidth","watch","getConstructor","input","constructor","instanceOf","b","isNullOrUndefined","isObject","Object","isString","String","isArray","Array","isNodeList","NodeList","is","Element","Event","length","keys","round","number","step","c","value","match","Math","max","getDecimalPlaces","parseFloat","toFixed","places","RangeTouch","target","options","this","element","document","querySelector","rangeTouch","config","init","enabled","documentElement","static","arguments","targets","from","querySelectorAll","filter","d","MutationObserver","mutations","forEach","mutation","addedNodes","node","selector","includes","call","matches","observer","observe","body","childList","subtree","map","t","style","userSelect","webKitUserSelect","touchAction","listeners","destroy","toggle","type","method","event","set","get","touch","changedTouches","min","getAttribute","g","h","getBoundingClientRect","clientRect","width","height","clientY","top","clientX","left","percent","disabled","preventDefault","bubbles","dispatchEvent","trigger","loadSprite","url","XMLHttpRequest","xhr","open","onload","a","createElement","container","setAttribute","innerHTML","responseText","insertBefore","childNodes","send","addEventListener","window","shr","setup","count","classname"],"mappings":"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","file":"docs.js","sourcesContent":["// ==========================================================================\r\n// Docs example\r\n// ==========================================================================\r\n\r\nimport RangeTouch from '../../../src/js/rangetouch';\r\n\r\nconst loadSprite = url => {\r\n    const xhr = new XMLHttpRequest();\r\n    const { body } = document;\r\n\r\n    // Check for CORS support\r\n    // If you're loading from same domain, you can remove the whole if/else statement\r\n    // XHR for Chrome/Firefox/Opera/Safari/IE10+\r\n    if (!('withCredentials' in xhr)) {\r\n        return;\r\n    }\r\n\r\n    xhr.open('GET', url, true);\r\n\r\n    // Inject hidden div with sprite on load\r\n    xhr.onload = () => {\r\n        const container = document.createElement('div');\r\n        container.setAttribute('hidden', '');\r\n        container.innerHTML = xhr.responseText;\r\n        body.insertBefore(container, body.childNodes[0]);\r\n    };\r\n\r\n    xhr.send();\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    // Load the sprite\r\n    ['dist/docs.svg'].forEach(loadSprite);\r\n\r\n    // Setup shr\r\n    window.shr.setup({\r\n        count: {\r\n            classname: 'btn__count',\r\n        },\r\n    });\r\n\r\n    // Set range thumb size\r\n    RangeTouch.setup('.js-example', { thumbWidth: 20 });\r\n});\r\n","const defaults = {\r\n    addCSS: true, // Add CSS to the element to improve usability (required here or in your CSS!)\r\n    thumbWidth: 15, // The width of the thumb handle\r\n    watch: true, // Watch for new elements that match a string target\r\n};\r\n\r\nexport default defaults;","// ==========================================================================\r\n// Type checking utils\r\n// ==========================================================================\r\n\r\nconst getConstructor = input => (input !== null && typeof input !== 'undefined' ? input.constructor : null);\r\nconst instanceOf = (input, constructor) => Boolean(input && constructor && input instanceof constructor);\r\n\r\nconst isNullOrUndefined = input => input === null || typeof input === 'undefined';\r\nconst isObject = input => getConstructor(input) === Object;\r\nconst isNumber = input => getConstructor(input) === Number && !Number.isNaN(input);\r\nconst isString = input => getConstructor(input) === String;\r\nconst isBoolean = input => getConstructor(input) === Boolean;\r\nconst isFunction = input => getConstructor(input) === Function;\r\nconst isArray = input => Array.isArray(input);\r\nconst isNodeList = input => instanceOf(input, NodeList);\r\nconst isElement = input => instanceOf(input, Element);\r\nconst isEvent = input => instanceOf(input, Event);\r\nconst isEmpty = input =>\r\n    isNullOrUndefined(input) ||\r\n    ((isString(input) || isArray(input) || isNodeList(input)) && !input.length) ||\r\n    (isObject(input) && !Object.keys(input).length);\r\n\r\nexport default {\r\n    nullOrUndefined: isNullOrUndefined,\r\n    object: isObject,\r\n    number: isNumber,\r\n    string: isString,\r\n    boolean: isBoolean,\r\n    function: isFunction,\r\n    array: isArray,\r\n    nodeList: isNodeList,\r\n    element: isElement,\r\n    event: isEvent,\r\n    empty: isEmpty,\r\n};\r\n","// Get the number of decimal places\r\nexport function getDecimalPlaces(value) {\r\n    const match = `${value}`.match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\r\n\r\n    if (!match) {\r\n        return 0;\r\n    }\r\n\r\n    return Math.max(\r\n        0,\r\n        // Number of digits right of decimal point.\r\n        (match[1] ? match[1].length : 0) -\r\n            // Adjust for scientific notation.\r\n            (match[2] ? +match[2] : 0),\r\n    );\r\n}\r\n\r\n// Round to the nearest step\r\nexport function round(number, step) {\r\n    if (step < 1) {\r\n        const places = getDecimalPlaces(step);\r\n        return parseFloat(number.toFixed(places));\r\n    }\r\n    return Math.round(number / step) * step;\r\n}\r\n\r\nexport default { getDecimalPlaces, round };\r\n","// ==========================================================================\r\n// rangetouch.js v2.0.1\r\n// Making <input type=\"range\"> work on touch devices\r\n// https://github.com/sampotts/rangetouch\r\n// License: The MIT License (MIT)\r\n// ==========================================================================\r\n\r\nimport defaults from './config';\r\nimport { matches } from './utils/css';\r\nimport { trigger } from './utils/events';\r\nimport is from './utils/is';\r\nimport { round } from './utils/numbers';\r\n\r\nclass RangeTouch {\r\n    /**\r\n     * Setup a new instance\r\n     * @param {String|Element} target\r\n     * @param {Object} options\r\n     */\r\n    constructor(target, options) {\r\n        if (is.element(target)) {\r\n            // An Element is passed, use it directly\r\n            this.element = target;\r\n        } else if (is.string(target)) {\r\n            // A CSS Selector is passed, fetch it from the DOM\r\n            this.element = document.querySelector(target);\r\n        }\r\n\r\n        if (!is.element(this.element) || !is.empty(this.element.rangeTouch)) {\r\n            return;\r\n        }\r\n\r\n        this.config = { ...defaults, ...options };\r\n\r\n        this.init();\r\n    }\r\n\r\n    static get enabled() {\r\n        return 'ontouchstart' in document.documentElement;\r\n    }\r\n\r\n    /**\r\n     * Setup multiple instances\r\n     * @param {String|Element|NodeList|Array} target\r\n     * @param {Object} options\r\n     */\r\n    static setup(target, options = {}) {\r\n        let targets = null;\r\n\r\n        if (is.empty(target) || is.string(target)) {\r\n            targets = Array.from(document.querySelectorAll(is.string(target) ? target : 'input[type=\"range\"]'));\r\n        } else if (is.element(target)) {\r\n            targets = [target];\r\n        } else if (is.nodeList(target)) {\r\n            targets = Array.from(target);\r\n        } else if (is.array(target)) {\r\n            targets = target.filter(is.element);\r\n        }\r\n\r\n        if (is.empty(targets)) {\r\n            return null;\r\n        }\r\n\r\n        const config = { ...defaults, ...options };\r\n\r\n        if (is.string(target) && config.watch) {\r\n            // Create an observer instance\r\n            const observer = new MutationObserver(mutations => {\r\n                Array.from(mutations).forEach(mutation => {\r\n                    Array.from(mutation.addedNodes).forEach(node => {\r\n                        if (!is.element(node) || !matches(node, target)) {\r\n                            return;\r\n                        }\r\n\r\n                        // eslint-disable-next-line no-unused-vars\r\n                        const range = new RangeTouch(node, config);\r\n                    });\r\n                });\r\n            });\r\n\r\n            // Pass in the target node, as well as the observer options\r\n            observer.observe(document.body, {\r\n                childList: true,\r\n                subtree: true,\r\n            });\r\n        }\r\n\r\n        return targets.map(t => new RangeTouch(t, options));\r\n    }\r\n\r\n    init() {\r\n        // Bail if not a touch enabled device\r\n        if (!RangeTouch.enabled) {\r\n            return;\r\n        }\r\n\r\n        // Add useful CSS\r\n        if (this.config.addCSS) {\r\n            this.element.style.userSelect = 'none';\r\n            this.element.style.webKitUserSelect = 'none';\r\n            this.element.style.touchAction = 'manipulation';\r\n        }\r\n\r\n        this.listeners(true);\r\n\r\n        this.element.rangeTouch = this;\r\n    }\r\n\r\n    destroy() {\r\n        // Bail if not a touch enabled device\r\n        if (!RangeTouch.enabled) {\r\n            return;\r\n        }\r\n\r\n        // Remove useful CSS\r\n        if (this.config.addCSS) {\r\n            this.element.style.userSelect = '';\r\n            this.element.style.webKitUserSelect = '';\r\n            this.element.style.touchAction = '';\r\n        }\r\n\r\n        this.listeners(false);\r\n\r\n        this.element.rangeTouch = null;\r\n    }\r\n\r\n    listeners(toggle) {\r\n        const method = toggle ? 'addEventListener' : 'removeEventListener';\r\n\r\n        // Listen for events\r\n        ['touchstart', 'touchmove', 'touchend'].forEach(type => {\r\n            this.element[method](type, event => this.set(event), false);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get the value based on touch position\r\n     * @param {Event} event\r\n     */\r\n    get(event) {\r\n        if (!RangeTouch.enabled || !is.event(event)) {\r\n            return null;\r\n        }\r\n\r\n        const input = event.target;\r\n        const touch = event.changedTouches[0];\r\n        const min = parseFloat(input.getAttribute('min')) || 0;\r\n        const max = parseFloat(input.getAttribute('max')) || 100;\r\n        const step = parseFloat(input.getAttribute('step')) || 1;\r\n        const delta = max - min;\r\n\r\n        // Calculate percentage\r\n        let percent;\r\n        const clientRect = input.getBoundingClientRect();\r\n        const thumbWidth = ((100 / clientRect.width) * (this.config.thumbWidth / 2)) / 100;\r\n\r\n        // Determine left percentage\r\n        if(clientRect.height > clientRect.width) {\r\n            percent = (100 / clientRect.height) * (touch.clientY - clientRect.top);\r\n        } else {\r\n            percent = (100 / clientRect.width) * (touch.clientX - clientRect.left);\r\n        }\r\n\r\n        // Don't allow outside bounds\r\n        if (percent < 0) {\r\n            percent = 0;\r\n        } else if (percent > 100) {\r\n            percent = 100;\r\n        }\r\n\r\n        // Factor in the thumb offset\r\n        if (percent < 50) {\r\n            percent -= (100 - percent * 2) * thumbWidth;\r\n        } else if (percent > 50) {\r\n            percent += (percent - 50) * 2 * thumbWidth;\r\n        }\r\n\r\n        // Find the closest step to the mouse position\r\n        return min + round(delta * (percent / 100), step);\r\n    }\r\n\r\n    /**\r\n     * Update range value based on position\r\n     * @param {Event} event\r\n     */\r\n    set(event) {\r\n        if (!RangeTouch.enabled || !is.event(event) || event.target.disabled) {\r\n            return;\r\n        }\r\n\r\n        // Prevent text highlight on iOS\r\n        event.preventDefault();\r\n\r\n        // Set value\r\n        // eslint-disable-next-line no-param-reassign\r\n        event.target.value = this.get(event);\r\n\r\n        // Trigger event\r\n        trigger(event.target, event.type === 'touchend' ? 'change' : 'input');\r\n    }\r\n}\r\n\r\nexport default RangeTouch;\r\n","// Element matches a selector\r\nexport function matches(element, selector) {\r\n    const prototype = { Element };\r\n\r\n    function match() {\r\n        return Array.from(document.querySelectorAll(selector)).includes(this);\r\n    }\r\n\r\n    const method =\r\n        prototype.matches ||\r\n        prototype.webkitMatchesSelector ||\r\n        prototype.mozMatchesSelector ||\r\n        prototype.msMatchesSelector ||\r\n        match;\r\n\r\n    return method.call(element, selector);\r\n}\r\n\r\nexport default { matches };\r\n","// Trigger event\r\nexport function trigger(element, type) {\r\n    if (!element || !type) {\r\n        return;\r\n    }\r\n\r\n    // Create and dispatch the event\r\n    const event = new Event(type, { bubbles: true });\r\n\r\n    // Dispatch the event\r\n    element.dispatchEvent(event);\r\n}\r\n\r\nexport default { trigger };\r\n"]}